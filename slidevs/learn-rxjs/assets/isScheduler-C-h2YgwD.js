import{_ as c,S as a,a as o,b as d,d as f,e as v}from"./fromEvent-DIvCH5F-.js";var p={now:function(){return Date.now()},delegate:void 0},y=function(i){c(n,i);function n(e,t){return i.call(this)||this}return n.prototype.schedule=function(e,t){return this},n}(a),h={setInterval:function(i,n){for(var e=[],t=2;t<arguments.length;t++)e[t-2]=arguments[t];return setInterval.apply(void 0,o([i,n],d(e)))},clearInterval:function(i){return clearInterval(i)},delegate:void 0},A=function(i){c(n,i);function n(e,t){var r=i.call(this,e,t)||this;return r.scheduler=e,r.work=t,r.pending=!1,r}return n.prototype.schedule=function(e,t){var r;if(t===void 0&&(t=0),this.closed)return this;this.state=e;var s=this.id,u=this.scheduler;return s!=null&&(this.id=this.recycleAsyncId(u,s,t)),this.pending=!0,this.delay=t,this.id=(r=this.id)!==null&&r!==void 0?r:this.requestAsyncId(u,this.id,t),this},n.prototype.requestAsyncId=function(e,t,r){return r===void 0&&(r=0),h.setInterval(e.flush.bind(e,this),r)},n.prototype.recycleAsyncId=function(e,t,r){if(r===void 0&&(r=0),r!=null&&this.delay===r&&this.pending===!1)return t;t!=null&&h.clearInterval(t)},n.prototype.execute=function(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var r=this._execute(e,t);if(r)return r;this.pending===!1&&this.id!=null&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},n.prototype._execute=function(e,t){var r=!1,s;try{this.work(e)}catch(u){r=!0,s=u||new Error("Scheduled action threw falsy error")}if(r)return this.unsubscribe(),s},n.prototype.unsubscribe=function(){if(!this.closed){var e=this,t=e.id,r=e.scheduler,s=r.actions;this.work=this.state=this.scheduler=null,this.pending=!1,f(s,this),t!=null&&(this.id=this.recycleAsyncId(r,t,null)),this.delay=null,i.prototype.unsubscribe.call(this)}},n}(y),l=function(){function i(n,e){e===void 0&&(e=i.now),this.schedulerActionCtor=n,this.now=e}return i.prototype.schedule=function(n,e,t){return e===void 0&&(e=0),new this.schedulerActionCtor(this,n).schedule(t,e)},i.now=p.now,i}(),w=function(i){c(n,i);function n(e,t){t===void 0&&(t=l.now);var r=i.call(this,e,t)||this;return r.actions=[],r._active=!1,r}return n.prototype.flush=function(e){var t=this.actions;if(this._active){t.push(e);return}var r;this._active=!0;do if(r=e.execute(e.state,e.delay))break;while(e=t.shift());if(this._active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}},n}(l),b=new w(A),I=b;function _(i){return i&&v(i.schedule)}export{I as a,b,_ as i};
