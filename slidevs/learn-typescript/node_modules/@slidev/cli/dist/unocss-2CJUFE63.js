"use strict";Object.defineProperty(exports, "__esModule", {value: true}); function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

var _chunkKKGXM3XLjs = require('./chunk-KKGXM3XL.js');
require('./chunk-MJQETB73.js');

// node/plugins/unocss.ts
var _path = require('path');
var _fs = require('fs');
var _utils = require('@antfu/utils');
var _unocss = require('unocss');
var _jiti = require('jiti'); var _jiti2 = _interopRequireDefault(_jiti);
var _vite = require('unocss/vite'); var _vite2 = _interopRequireDefault(_vite);
async function createUnocssPlugin({ themeRoots, addonRoots, clientRoot, roots, userRoot, data }, { unocss: unoOptions = {} }) {
  var _a, _b, _c, _d;
  const configFiles = _utils.uniq.call(void 0, [
    _path.resolve.call(void 0, userRoot, "uno.config.ts"),
    _path.resolve.call(void 0, userRoot, "unocss.config.ts"),
    ...themeRoots.map((i) => `${i}/uno.config.ts`),
    ...themeRoots.map((i) => `${i}/unocss.config.ts`),
    ...addonRoots.map((i) => `${i}/uno.config.ts`),
    ...addonRoots.map((i) => `${i}/unocss.config.ts`),
    _path.resolve.call(void 0, clientRoot, "uno.config.ts"),
    _path.resolve.call(void 0, clientRoot, "unocss.config.ts")
  ]).filter((i) => _fs.existsSync.call(void 0, i));
  const configs = configFiles.map((i) => {
    const loaded = _jiti2.default.call(void 0, __filename)(i);
    const config2 = "default" in loaded ? loaded.default : loaded;
    return config2;
  }).filter(Boolean);
  configs.reverse();
  let config = _unocss.mergeConfigs.call(void 0, [...configs, unoOptions]);
  config = await _chunkKKGXM3XLjs.loadSetups.call(void 0, roots, "unocss.ts", {}, config, true);
  config.theme || (config.theme = {});
  (_a = config.theme).fontFamily || (_a.fontFamily = {});
  (_b = config.theme.fontFamily).sans || (_b.sans = data.config.fonts.sans.join(","));
  (_c = config.theme.fontFamily).mono || (_c.mono = data.config.fonts.mono.join(","));
  (_d = config.theme.fontFamily).serif || (_d.serif = data.config.fonts.serif.join(","));
  return _vite2.default.call(void 0, {
    configFile: false,
    configDeps: configFiles,
    ...config
  });
}


exports.createUnocssPlugin = createUnocssPlugin;
